# * 鉱石採掘ゲームプラグイン　for Miinecraft *

Minecraftサーバ上で動作する、約2分間限定のスコアアタック型ミニゲーム「鉱石採掘ゲーム」を実装した Spigot/Paperプラグインです。
プレイヤーはピッケルを持って採掘場にテレポートし、制限時間内により多くの鉱石を破壊することでスコアを競います。
スコアや難易度設定に応じたバランス調整・データベース連携機能も搭載し、実用性と拡張性を意識した構成になっています。

-----

## * 機能概要 *
- '/treasurehunter [難易度]' でゲーム開始 ( 難易度 : easy / narmal / hard )
- 制限時間は難易度ごとに異なり、採掘できる鉱石の種類も変化します。
- コンボボーナス機能でスコア加算に戦略性を持たせました。
- '/back' コマンドで元の場所に戻ることが可能でです。
- ゲーム終了後にコマンド入力で元の位置と装備に復元できます。
- プレイヤーごとのスコア履歴をMySQLデータベースに記録

----

## * 使用コマンド *
コマンド                            | 説明                                      
-----------------------------------|--------------------------------------------------------------
| '/treasurehunter [難易度]'    　　| ゲームを開始します ( 難易度 : easy / normal / hard)
| '/treasurehunter list'  　　　　 | プレイヤーの過去のスコア履歴を表示
| '/back' 　　　      　　　　　　　 | ゲーム終了後に元の位置へ戻る(任意)

-----

## * 鉱石ポイント一覧 *
・鉄鉱石(IRON_ORE)    1P

・金鉱石(GOLD_ORE)    10P

・ラピスラズリ、レッドストーン鉱石(LAPIS_ORE,REDSTONE_ORE)　　20P

・ダイアモンド鉱石(DIAMOND_ORE)      50P

・エメラルド鉱石(EMERALD_ORE)        80P


-----
## * 開発環境 *




## * ゲームの流れ *
1. '/treasurehunter [難易度]' を実行すると、採掘場にテレポートしダイアモンドのピッケルが配布され、体力と空腹度は最大化されます。
2. 制限時間(例 : easy = 100秒 , normal = 80秒 , hard = 60秒 )内に、出現する鉱石を採掘してください。
3. 鉱石を連続して採掘すると **コンボボーナス** が加算され、戦略的なゲームが可能になります。
4. ゲーム終了後は、スコアが表示され、元の持ち物・位置に戻されます。
5. 成績は自動的にデータベースに保存され、'/treasurehunter list' で確認可能。

----

## *　データベース連携について *
このプラグインでは、ゲーム終了時のプレイヤーのスコア情報を**MySQLデータベース**に保存しています。
記録されたデータはランキング機能などに活用できます。

----

## * データベース設計 *

  テーブル名 : player_sccore
  
属性                            | 設定値                                      
-----------------------------------|--------------------------------------------------------------
| ユーザー名   　　| 　※
| パスワード　　 | 　※
| URL　 | 　※　　　
| データベース名　| treasure_game 
| テーブル名　　| player_score


(※) はご自身のMySQL環境に合わせて設定してください。

-----

## * データベース構成 *

  
カラム名                           | 　説明                                     
-----------------------------------|--------------------------------------------------------------
| id   　　| 　主キー　、　AutoCommit
| player_name　　 | 　プレイヤー名
| score　 | 　鉱石採掘の結果　　
| difficulty　| 難易度 
| registered_at　　| 登録日時

----

## * データベースの接続方法 *
1. 自身のローカル環境でMySQLに接続してください。
2. 以下のSQLコマンドを実行してください。

'''
CREATE DATABASE treasure_game;
'''

'''
USE treasure_game;
'''

'''
CREATE TABLE player_score(id int auto-increment player_name varchar(100), score int, difficulty varchar(30), registered_at datetime, primary key(id)) DEFAULT CHARSET=utf8;
'''


-----

## * こだわり・工夫したポイント *
- **難易度設定機能** : GameDifficultyクラスにより、時間・鉱石出現率を柔軟に管理できるようにしました。
- **スコアボード連携** : リアルタイムにスコアと残り時間を表示するため、視覚的にも分かりやすい設計にしました。
- **コンボボーナス** : 連続して同じ鉱石を採掘することで加算ポイントが増加し、スコアアタックに戦略性を追加しました。
- **復元処理の実装** : ゲーム前の位置・アイテムを保存し、終了後に正確に復元できるように意識しました。
- **出現鉱石の管理** : ゲーム中に出現させたブロックは、'BlockState'で保存し、建築物なども正確に復元できるようにしました。
- **マルチプレイ対応** : プレイヤーごとにGameDataを個別に管理し、同時プレイにも対応できるようにしました。

----






  
  
